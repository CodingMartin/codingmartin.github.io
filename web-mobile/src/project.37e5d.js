window.__require=function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var r="function"==typeof __require&&__require;if(!s&&r)return r(l,!0);if(c)return c(l,!0);throw new Error("Cannot find module '"+a+"'")}}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){return o(e[a][1][t]||t)},h,h.exports,t,e,i,n)}return i[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({ActionRouter:[function(t,e,i){"use strict";cc._RF.push(e,"c2e9adf54BHYp9Uun2/++tR","ActionRouter"),cc.Class({extends:cc.Component,properties:{},onQuickStartClick:function(t){cc.director.loadScene("MainActivity")},onRankFriendClick:function(t){cc.director.loadScene("LeaderboardActivity")},onRankWorldClick:function(t){cc.director.loadScene("LeaderboardActivity")},onRouteToHomeClick:function(t){cc.director.loadScene("HomeActivity")}}),cc._RF.pop()},{}],AudioMng:[function(t,e,i){"use strict";cc._RF.push(e,"dcb85P8bNlNM7DAG0zmsrdM","AudioMng"),cc.Class({extends:cc.Component,properties:{homeBGM:{default:null,type:cc.AudioClip},gameBGM:{default:null,type:cc.AudioClip},buttonEFT:{default:null,type:cc.AudioClip},zhubajieEFT:{default:null,type:cc.AudioClip},tuziEFT:{default:null,type:cc.AudioClip},changeEFT:{default:null,type:cc.AudioClip},moveEFT:{default:null,type:cc.AudioClip},readyEFT:{default:null,type:cc.AudioClip}},_play:function(t){cc.audioEngine.playMusic(t,!0)},pause:function(){cc.audioEngine.pauseMusic()},resume:function(){cc.audioEngine.resumeMusic()},playHome:function(){this.homeBGM&&this._play(this.homeBGM)},playInGame:function(){this.gameBGM&&this._play(this.gameBGM)},_playEFT:function(t){cc.audioEngine.playEffect(t,!1)},playButton:function(){this.buttonEFT&&this._playEFT(this.buttonEFT)},playZhubajie:function(){this.zhubajieEFT&&this._playEFT(this.zhubajieEFT)},playTuzi:function(){this.tuziEFT&&this._playEFT(this.tuziEFT)},playChange:function(){this.changeEFT&&this._playEFT(this.changeEFT)},playMove:function(){this.moveEFT&&this._playEFT(this.moveEFT)},playReady:function(){this.readyEFT&&this._playEFT(this.readyEFT)}}),cc._RF.pop()},{}],ButtonExtra:[function(t,e,i){"use strict";cc._RF.push(e,"0a34dFWO4dDBZT3mxa72rYN","ButtonExtra"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.audioMng=cc.find("Menu/AudioMng")||cc.find("Settle/AudioMng")||cc.find("Rank/AudioMng"),this.audioMng&&(this.audioMng=this.audioMng.getComponent("AudioMng"))},start:function(){},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onButtonTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onButtonTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onButtonTouchEnd,this)},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onButtonTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onButtonTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onButtonTouchEnd,this)},onButtonTouchStart:function(t){this.node.stopActionByTag(111),this.node.stopActionByTag(222);var e=cc.scaleTo(.1,.9);e.setTag(111),this.node.runAction(e),this.audioMng&&this.audioMng.playButton()},onButtonTouchEnd:function(t){this.node.stopActionByTag(111),this.node.stopActionByTag(222);var e=cc.scaleTo(.1,1);e.setTag(222),this.node.runAction(e)}}),cc._RF.pop()},{}],ButtonGuide:[function(t,e,i){"use strict";cc._RF.push(e,"d27f4pCDPZKUoQ64PJB27Pk","ButtonGuide"),cc.Class({extends:cc.Component,properties:{normal:{default:null,type:cc.SpriteFrame},pressed:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.selfSprite=this.node.getComponent(cc.Sprite),this.changeSpriteFrame(!1)},changeSpriteFrame:function(t){this.selfSprite.spriteFrame=t?this.pressed:this.normal}}),cc._RF.pop()},{}],Constants:[function(t,e,i){"use strict";cc._RF.push(e,"baa34G3owRJuIspk1A+vRWd","Constants"),e.exports={TAG_ROLE:1e3,TAG_FALLING:1001},cc._RF.pop()},{}],FallingThings:[function(t,e,i){"use strict";cc._RF.push(e,"08e7aNw9g9E7KzNK7I7zCKF","FallingThings");var n=t("Constants");cc.Class({extends:cc.Component,properties:{ySpeed:0,collisionRadius:0,score:0,fallingType:cc.String},onLoad:function(){this.yX=.2*this.node.parent.height,this.yX=this.node.parent.height/2-this.yX},start:function(){},update:function(t){this.node.y-=this.ySpeed*t,this.node.y<=-this.yX&&(cc.director.GlobalEvent.emit("fallingDismiss",{data:this.node}),this.node.removeFromParent())},onCollisionEnter:function(t,e){t.tag==n.TAG_ROLE&&e.tag==n.TAG_FALLING&&(cc.director.GlobalEvent.emit("fallingDismiss",{data:this.node}),cc.director.GlobalEvent.emit("fallingConllision",{data:this.node,fallingScore:this.score,fallingType:this.fallingType}),this.node.removeFromParent())},updateExterior:function(t,e){this.score=t.scroe,this.fallingType=t.name,this.ySpeed=t.speed*e,this.node.getComponent(cc.Sprite).spriteFrame=t.skin}}),cc._RF.pop()},{Constants:"Constants"}],Fallings:[function(t,e,i){"use strict";cc._RF.push(e,"3f2c7lFe09AkajFLJyyzoVP","Fallings"),cc.Class({name:"Fallings",properties:{name:"",skin:{default:null,type:cc.SpriteFrame},scroe:{default:10,type:cc.Integer},speed:200,weight:{default:[],type:[cc.String]}}}),cc._RF.pop()},{}],GlobalEvent:[function(t,e,i){"use strict";cc._RF.push(e,"02923SnqCdJFLGb/0v+yPnK","GlobalEvent"),cc.director.GlobalEvent={handles_:{},emit:function(t,e){cc.director.emit(t,e)},on:function(t,e,i){console.log("\u6536\u5230\u4e8b\u4ef6",t),cc.director.on(t,e,i)},off:function(t){console.log("\u79fb\u9664\u4e8b\u4ef6",t),cc.director.off(t)}},cc._RF.pop()},{}],Home:[function(t,e,i){"use strict";cc._RF.push(e,"ec693tjykBNQo60d25DwBcm","Home"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"92750/NVC5O64yLVLJ855LE","Player"),cc.Class({extends:cc.Component,properties:{moveSpeed:200},onLoad:function(){this.acceLeft=!1,this.acceRight=!1,this.xSpeed=0,this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onUserTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onUserTouchEnd,this),this.audioMng=cc.find("Main/AudioMng").getComponent("AudioMng")},start:function(){},onUserTouchStart:function(t){var e=cc.winSize.width/2;this.acceLeft=t.getLocationX()<=e,this.acceRight=!this.acceLeft;var i=cc.find("Canvas/btn_left").getComponent("ButtonGuide"),n=cc.find("Canvas/btn_right").getComponent("ButtonGuide");this.acceLeft&&i?(i.changeSpriteFrame(!0),n.changeSpriteFrame(!1)):this.acceRight&&n&&(i.changeSpriteFrame(!1),n.changeSpriteFrame(!0)),this.audioMng&&this.audioMng.playMove()},onUserTouchEnd:function(t){this.acceLeft=!1,this.acceRight=!1,this.xSpeed=0;var e=cc.find("Canvas/btn_left").getComponent("ButtonGuide"),i=cc.find("Canvas/btn_right").getComponent("ButtonGuide");e&&e.changeSpriteFrame(!1),i&&i.changeSpriteFrame(!1)},onDestroy:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onUserTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onUserTouchEnd,this)},update:function(t){this.acceLeft?this.node.x-=t*this.moveSpeed:this.acceRight&&(this.node.x+=t*this.moveSpeed),this.node.x<-cc.winSize.width/2?this.node.x=-cc.winSize.width/2:this.node.x>cc.winSize.width/2-this.node.width&&(this.node.x=cc.winSize.width/2-this.node.width)}}),cc._RF.pop()},{}],PropThings:[function(t,e,i){"use strict";cc._RF.push(e,"8e0bb//wRJFP7q6zDx9u8Yb","PropThings"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],RankController:[function(t,e,i){"use strict";cc._RF.push(e,"85768buAHFBarTZ8fR4R9P/","RankController"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("HomeActivity")}}),cc._RF.pop()},{}],SettileController:[function(t,e,i){"use strict";cc._RF.push(e,"5e72dnY6FZAGLk3RKltX7oj","SettileController"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.preloadScene("MainActivity")}}),cc._RF.pop()},{}],UIController:[function(t,e,i){"use strict";cc._RF.push(e,"f1e77ODgXtJgrWCndVLKVLE","UIController");var n=t("Utils"),o=t("Fallings");cc.Class({extends:cc.Component,properties:{fallingPrefab:{default:null,type:cc.Prefab},fallings:{default:[],type:o},failedPlayerSkin:{default:null,type:cc.SpriteFrame},acceFactor:{default:1,min:1,max:2.5,tooltip:"\u901f\u5ea6\u500d\u6570",displayName:"\u52a0\u901f\u56e0\u5b50"},fallingTotalNums:{default:20,type:cc.Integer,range:[3,30,1],slide:!0,displayName:"\u540c\u5c4f\u6570\u91cf",tooltip:"\u6700\u5927\u540c\u5c4f\u6570\u91cf"},fallingCreateNums:{default:1,type:cc.Integer,range:[1,3,1],slide:!0,displayName:"\u5760\u843d\u7269\u7684\u4e2a\u6570",tooltip:"\u6bcf\u79d2\u6700\u591a\u751f\u6210\u5760\u843d\u7269\u7684\u4e2a\u6570"},refreshTime:{default:1,range:[.5,2,1],slide:!0,displayName:"\u5237\u65b0\u7684\u6700\u5927\u95f4\u9694",tooltip:"\u5237\u65b0\u7684\u6700\u5927\u95f4\u9694"},maxAcceFactor:{default:2.5,range:[1,2.5,1],slide:!0,displayName:"\u6700\u5927\u7684\u52a0\u901f\u56e0\u5b50",tooltip:"\u6700\u5927\u7684\u52a0\u901f\u56e0\u5b50"},minRefreshTime:{default:.6,range:[.2,1,1],displayName:"\u6700\u5c0f\u7684\u5237\u65b0\u95f4\u9694",tooltip:"\u6700\u5c0f\u7684\u5237\u65b0\u95f4\u9694"},refreshChangeCycle:{default:.05,range:[.05,.2,.1],displayName:"\u5237\u65b0\u53d8\u5316\u6bcf\u6b21\u6570",tooltip:"\u5237\u65b0\u53d8\u5316\u6bcf\u6b21\u6570"},acceFactorChangeCycle:{default:.1,range:[.1,.5,.1],displayName:"\u52a0\u901f\u56e0\u5b50\u6bcf\u6b21\u53d8\u5316\u6570",tooltip:"\u52a0\u901f\u56e0\u5b50\u6bcf\u6b21\u53d8\u5316\u6570"}},onLoad:function(){var t=this;cc.director.getCollisionManager().enabled=!0,this.fallingPool=new cc.NodePool("falling"),this.ssFallingNums=0,this.gameOver=!1,this.weightArr=[],this.weightIndex=0,this.weightCallbackHandler(),this.randomCreateFalling(),this.scheduleCallback=function(){this.acceFactor!=this.maxAcceFactor?(this.acceFactor+=this.acceFactorChangeCycle,this.refreshTime>=this.minRefreshTime&&(this.refreshTime-=this.refreshChangeCycle)):this.acceFactor>=this.maxAcceFactor&&t.unschedule(t.scheduleCallback)},this.scroeLabelView=cc.find("Canvas/scroe_layout/scroeView").getComponent(cc.Label),this.scroe=0,this.scroeLabelView.string="\u79ef\u5206:"+this.scroe,this.audioMng=cc.find("Main/AudioMng").getComponent("AudioMng"),this.audioMng&&this.audioMng.playReady(),this.audioMng&&this.audioMng.playInGame(),cc.director.GlobalEvent.on("fallingDismiss",this._recycleFalling,this),cc.director.GlobalEvent.on("fallingConllision",this._updateFallingConllision,this),this.schedule(this.scheduleCallback,5),this.schedule(this.weightCallbackHandler,5,8,0)},weightCallbackHandler:function(){var t=this;4>=this.weightIndex?(this.weightArr=[],this.fallings.forEach(function(e){t.weightArr.push({name:e.name,weight:e.weight[t.weightIndex]})}),cc.log(this.weightArr),this.weightIndex++,this.fallingCreateNums+=10):this.unschedule(this.weightScheduleCallback)},randomCreateFalling:function(){var t=this,e=cc.repeatForever(cc.sequence(cc.delayTime(this.refreshTime),cc.callFunc(function(){var e=Math.ceil(Math.random()*this.fallingCreateNums),i=this.fallingTotalNums-this.ssFallingNums;i=i>=e?e:i>0?i:0;for(var n=0;n<i;n++)t.createFallings()},this)));e.setTag(11),this.node.stopActionByTag(125),this.node.runAction(e)},onDestroy:function(){cc.director.getCollisionManager().enabled=!1,cc.director.GlobalEvent.off("fallingDismiss"),cc.director.GlobalEvent.off("fallingConllision"),this.unschedule(this.scheduleCallback),this.unschedule(this.weightCallbackHandler),this.audioMng.pause()},_recycleFalling:function(t){this.fallingPool.put(t.data),this.ssFallingNums--},_updateFallingConllision:function(t){"zhubajie"!=t.fallingType||this.gameOver?this.gameOver||("change"==t.fallingType?this.audioMng&&this.audioMng.playChange():"tuzi"==t.fallingType&&this.audioMng&&this.audioMng.playTuzi(),this.scroe+=t.fallingScore,this.scroeLabelView.string="\u79ef\u5206:"+this.scroe):(cc.find("Canvas/Player").getComponent(cc.Sprite).spriteFrame=this.failedPlayerSkin,this.gameOver=!0,this.audioMng&&this.audioMng.playZhubajie(),this.scheduleOnce(function(t){cc.director.loadScene("SettleActivity")},1),cc.director.getCollisionManager().enabled=!1)},createFallings:function(){var t=void 0;t=this.fallingPool.size()>0?this.fallingPool.get():cc.instantiate(this.fallingPrefab);var e=-cc.winSize.width/2+20,i=cc.winSize.width/2-20,o=cc.winSize.height/2,c=n.withRandom(e,i);t.x=c,t.y=o;var a=n.randomFallingType(this.weightArr),s=this.fallings[a];t.getComponent("FallingThings").updateExterior(s,this.acceFactor);var l=cc.find("Canvas");t.parent=l,this.ssFallingNums++}}),cc._RF.pop()},{Fallings:"Fallings",Utils:"Utils"}],Utils:[function(t,e,i){"use strict";function n(t){var e,i=0,n=!1;Math.gcd=function(t,e){var i=Math.min(t,e),n=Math.max(t,e),o=1;if(0===t||0===e)return n;for(var c=i;c>=1;c--)if(i%c==0&&n%c==0){o=c;break}return o};for(var o=new Array,c=0;c<t.length;c++)void 0!==t[c].weight?-1!==t[c].weight.toString().indexOf("%")?(e=Math.floor(t[c].weight.toString().replace("%","")),n=!0):e=Math.floor(100*t[c].weight):e=0,o[c]=e,i=Math.gcd(i,e);var a=new Array,s=0,l=0;if(n){for(c=0;c<t.length;c++){l=o[c];for(var r=0;r<l&&!(s>=100);r++)a.push(c),s++}for(;s<100;)a.push(t.length-1),s++}else for(c=0;c<t.length;c++){l=o[c]/i;for(r=0;r<l;r++)a.push(c);s+=l}return a[Math.floor(Math.random()*s)]}cc._RF.push(e,"839aa/Ud1BDypSQLH8Mb8F6","Utils"),e.exports={withRandom:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},withFalling:function(){switch(n().name){case"yuebing":return{tag:"yuebing",skin:"",score:50,speed:100};case"zhadan":return{tag:"zhadan",skin:"",score:-150,speed:150};case"change":return{tag:"change",skin:"",score:150,speed:200}}return null},randomFallingType:n},cc._RF.pop()},{}]},{},["ActionRouter","AudioMng","ButtonExtra","ButtonGuide","Constants","FallingThings","Fallings","GlobalEvent","Home","Player","PropThings","RankController","SettileController","UIController","Utils"]);