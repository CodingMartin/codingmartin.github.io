require=function i(r,s,a){function u(o,t){if(!s[o]){if(!r[o]){var e="function"==typeof require&&require;if(!t&&e)return e(o,!0);if(h)return h(o,!0);var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var c=s[o]={exports:{}};r[o][0].call(c.exports,function(t){var e=r[o][1][t];return u(e||t)},c,c.exports,i,r,s,a)}return s[o].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)u(a[t]);return u}({GameMain:[function(t,e,o){"use strict";cc._RF.push(e,"220d5p+UN1LX7VxDlZxzmJZ","GameMain");var c=t("HeroPlayer");cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Sprite},timeLabel:{default:null,type:cc.Label},scoreChangePrefab:{default:null,type:cc.Prefab},scoreLabel:{default:null,type:cc.Label},yuebing:{default:null,type:cc.Prefab},zhadan:{default:null,type:cc.Prefab},luobo:{default:null,type:cc.Prefab},time:{default:10,type:cc.Integer,visible:!0},bgAudio:{default:null,url:cc.AudioClip}},onLoad:function(){this.setEventInputControl(),this.schedule(this.updateCountdown,1),this.audioId=cc.audioEngine.play(this.bgAudio,!0,.1)},onDestroy:function(){cc.audioEngine.stop(this.audioId)},setEventInputControl:function(){var t=this,n=t.player.getComponent(c);this.node.on(cc.Node.EventType.TOUCH_START,function(t){var e=t.getTouches()[0].getLocation(),o=t.getCurrentTarget().convertToNodeSpaceAR(e);n.heroMove(0<o.x),t.stopPropagation()},t.player),this.node.on(cc.Node.EventType.TOUCH_END,function(t){n.heroMoveEnd(),t.stopPropagation()},t.player)},updateCountdown:function(){var t=60*cc.random0To1();t<10?this.updateZhadan():10<=t&&t<=40?this.updateLuobo():this.updateYuebing(),this.countFunc()},updateYuebing:function(){this.newDropYuebing()},updateLuobo:function(){this.newDropLuobo()},updateZhadan:function(){this.newDropZhadan()},newDropZhadan:function(){var t=cc.instantiate(this.zhadan);t.setAnchorPoint(0,0),this.node.addChild(t),t.setPosition(this.getNewStarPosition(t));var e=cc.moveTo(2,cc.p(t.getPositionX(),-this.node.height/2+100)),o=cc.callFunc(t.removeFromParent,t,t.node),n=cc.sequence(e,o);t.runAction(n)},newDropYuebing:function(){var t=cc.instantiate(this.yuebing);t.setAnchorPoint(0,0),this.node.addChild(t),t.setPosition(this.getNewStarPosition(t));var e=cc.moveTo(2.5,cc.p(t.getPositionX(),-this.node.height/2+100)),o=cc.callFunc(t.removeFromParent,t,t.node),n=cc.sequence(e,o);t.runAction(n)},newDropLuobo:function(){var t=cc.instantiate(this.luobo);t.setAnchorPoint(0,0),this.node.addChild(t),t.setPosition(this.getNewStarPosition(t));var e=cc.moveTo(2.5,cc.p(t.getPositionX(),-this.node.height/2+100)),o=cc.callFunc(t.removeFromParent,t,t.node),n=cc.sequence(e,o);t.runAction(n)},getNewStarPosition:function(t){var e=(cc.random0To1()*this.node.width/2-t.width)*cc.randomMinus1To1(),o=this.node.height/2+100;return cc.p(e,o)},countFunc:function(){this.time--,this.time<=0&&this.gameOver(),this.timeLabel.string=this.time.toString()},gameOver:function(){cc.systemEvent.off(cc.Node.EventType.TOUCH_START),this.player.node.stopAllActions(),this.unschedule(this.updateCountdown)},incrementScore:function(t){var e=cc.instantiate(this.scoreChangePrefab);e.getComponent(cc.Label).string=0<t?"+"+t:t.toString(),e.color=0<t?cc.Color.WHITE:cc.Color.RED,e.setAnchorPoint(0,0),e.setPosition(0,0),this.node.addChild(e)}}),cc._RF.pop()},{HeroPlayer:"HeroPlayer"}],HeroPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"16385z75M9HKYaszhJ6ir7C","HeroPlayer"),cc.Class({extends:cc.Component,properties:{accel:1},onLoad:function(){this.accLeft=!1,this.accRight=!1,this.xSpeed=5;var t=cc.find("Canvas");this.lx=-t.width/2,this.rx=t.width/2-this.node.width,cc.log(this.lx+"   "+this.rx)},start:function(){},heroMove:function(t){this.accLeft=t,this.accRight=!t},heroMoveEnd:function(){this.accLeft=!1,this.accRight=!1},noteBox:function(){return this.node.getBoundingBoxToWorld()},update:function(t){this.accLeft?this.node.x>this.rx?(this.node.x=this.rx,this.accLeft=!1):this.node.x+=this.xSpeed:this.accRight&&(this.node.x<this.lx?(this.node.x=this.lx,this.accRight=!1):this.node.x-=this.xSpeed),console.log(this.node.x)}}),cc._RF.pop()},{}],Luobo:[function(t,e,o){"use strict";cc._RF.push(e,"9700100cGpOn7RQZrKrjUCF","Luobo");var n=t("HeroPlayer"),c=t("Score");cc.Class({extends:cc.Component,properties:{audio:{default:null,url:cc.AudioClip}},onLoad:function(){this.hero=cc.find("Canvas/player").getComponent(n),this.score=cc.find("Canvas/gamebg/game_top/scorelayout/score").getComponent(c)},noteBox:function(){return this.node.getBoundingBoxToWorld()},start:function(){},update:function(t){cc.rectIntersectsRect(this.hero.noteBox(),this.noteBox())&&(this.score.incrementScore(5),this.node.removeFromParent(),cc.audioEngine.play(this.audio,!1,.3))}}),cc._RF.pop()},{HeroPlayer:"HeroPlayer",Score:"Score"}],MonsterPool:[function(t,e,o){"use strict";cc._RF.push(e,"f8d52OcUChHRLNEVcKOhXAA","MonsterPool");cc.Class({extends:cc.Component,properties:{zhdanPrefab:cc.Prefab},onLoad:function(){this.zhadanPool=new cc.NodePool},pullZhadan:function(){return 0<this.zhadanPool.size()?this.zhadanPool.get():cc.instantiate(this.zhdanPrefab)},putZhadan:function(t){this.zhadanPool.put(t)},clear:function(){}}),cc._RF.pop()},{}],ScoreChange:[function(t,e,o){"use strict";cc._RF.push(e,"97477yERK5K1pdJ0KKnX4No","ScoreChange"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.getComponent(cc.Animation).play().speed=.1},start:function(){},onAnimationEnd:function(){this.node.removeFromParent()}}),cc._RF.pop()},{}],Score:[function(t,e,o){"use strict";cc._RF.push(e,"e0fcb0cqehLoIhCkqipAct2","Score");var n=t("GameMain");cc.Class({extends:cc.Component,properties:{scoreLabel:{default:null,type:cc.Label}},disScore:function(){this.scoreLabel.string=this.score.toString()},onLoad:function(){this.score=0,this.disScore()},incrementScore:function(t){this.score+=t,this.disScore(),cc.find("Canvas").getComponent(n).incrementScore(t),cc.sys.localStorage.setItem("score",this.scoreLabel.string)},start:function(){}}),cc._RF.pop()},{GameMain:"GameMain"}],StartBtn:[function(t,e,o){"use strict";cc._RF.push(e,"fa916FDowZFJ6bbr7kk7Y08","StartBtn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.anim=this.getComponent(cc.Animation);var t=this.anim.play();t.wrapMode=cc.WrapMode.Loop,t.repeatCount=1/0,t.speed=.5},start:function(){},onClick:function(){console.log("加载游戏场景"),this.anim.pause()}}),cc._RF.pop()},{}],Time:[function(t,e,o){"use strict";cc._RF.push(e,"0272797NbRNUazFlxr7qqpz","Time");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.time=60,this.updateTime()},updateTime:function(){this.node.getComponent(cc.Label).string=this.time.toString()},countDown:function(t){this.time--,this.time<=0&&t(),this.updateTime()},start:function(){}}),cc._RF.pop()},{}],Yuebing:[function(t,e,o){"use strict";cc._RF.push(e,"0f0988m5e9E+4M+rszSpoPJ","Yuebing");var n=t("HeroPlayer"),c=t("Score");cc.Class({extends:cc.Component,properties:{audio:{default:null,url:cc.AudioClip}},onLoad:function(){this.hero=cc.find("Canvas/player").getComponent(n),this.score=cc.find("Canvas/gamebg/game_top/scorelayout/score").getComponent(c)},noteBox:function(){return this.node.getBoundingBoxToWorld()},start:function(){},update:function(t){cc.rectIntersectsRect(this.hero.noteBox(),this.noteBox())&&(this.score.incrementScore(30),this.node.removeFromParent(),cc.audioEngine.play(this.audio,!1,.3))}}),cc._RF.pop()},{HeroPlayer:"HeroPlayer",Score:"Score"}],Zhadan:[function(t,e,o){"use strict";cc._RF.push(e,"337f0izEZhA5pErsqIiCbFe","Zhadan");var n=t("HeroPlayer"),c=t("Score");cc.Class({extends:cc.Component,properties:{audio:{url:cc.AudioClip,default:null}},onLoad:function(){this.hero=cc.find("Canvas/player").getComponent(n),this.score=cc.find("Canvas/gamebg/game_top/scorelayout/score").getComponent(c)},start:function(){},noteBox:function(){return this.node.getBoundingBoxToWorld()},update:function(t){cc.rectIntersectsRect(this.hero.noteBox(),this.noteBox())&&(this.score.incrementScore(-20),this.node.removeFromParent(),cc.audioEngine.play(this.audio,!1,.3))}}),cc._RF.pop()},{HeroPlayer:"HeroPlayer",Score:"Score"}]},{},["GameMain","HeroPlayer","Luobo","MonsterPool","Score","ScoreChange","StartBtn","Time","Yuebing","Zhadan"]);